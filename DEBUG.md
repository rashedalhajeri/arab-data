# دليل تشخيص الأخطاء

هذا الدليل يساعدك على اكتشاف وحل مشكلة "الشاشة البيضاء" وغيرها من المشاكل التي قد تواجهها في التطبيق.

## كيفية استخدام أدوات التشخيص

### 1. الوصول لصفحة التشخيص

يمكنك الوصول لصفحة التشخيص بزيارة:

```
http://localhost:8081/debug.html
```

أو أي منفذ آخر يعمل عليه التطبيق.

### 2. استخدام وحدة تحكم المتصفح (Console)

1. اضغط على F12 (أو انقر بزر الماوس الأيمن واختر "فحص العنصر" ثم انتقل لتبويب "Console").
2. في وضع التطوير، يمكنك استخدام أداة التشخيص عبر:

```javascript
window.appDebug.showErrorLog()        // لعرض سجل الأخطاء
window.appDebug.inspectDOM()          // لفحص حالة DOM
window.appDebug.checkDependencies()   // للتحقق من حالة المكتبات
window.appDebug.analyzeLoadedResources() // لتحليل الملفات المحملة فعلياً
```

## حل مشكلة الشاشة البيضاء والمكتبات المفقودة

إذا كنت تواجه مشكلة الشاشة البيضاء، جرب الخطوات التالية بالترتيب:

### 1. استخدام أداة تشخيص المكتبات

1. قم بزيارة صفحة التشخيص
2. انظر إلى قسم "تحليل المكتبات والتبعيات" للكشف عن المكتبات المفقودة
3. استخدم زر "إصلاح المكتبات المفقودة" للحصول على تعليمات التثبيت

### 2. تثبيت المكتبات المفقودة

إذا ظهرت مكتبات بحالة "غير متاح"، فعليك تثبيتها:

```bash
# تثبيت المكتبات الأساسية إذا كانت مفقودة
npm install react react-dom @supabase/supabase-js framer-motion

# تثبيت المكتبات الإضافية
npm install react-router-dom @tanstack/react-query lucide-react
```

### 3. مسح ذاكرة التخزين المؤقت للمتصفح

- اضغط Ctrl+F5 للتحديث وتنظيف ذاكرة التخزين المؤقت
- أو اذهب لصفحة التشخيص واضغط على زر "مسح التخزين المؤقت"

### 4. تحقق من أخطاء الاتصال بـ Supabase

- استخدم أداة "اختبار الاتصال بـ Supabase" في صفحة التشخيص
- افتح وحدة تحكم المتصفح (F12 -> Console) للتحقق من أي أخطاء مثل:
  - أخطاء اتصال شبكة مع Supabase
  - مشاكل في المصادقة أو الوصول للبيانات

### 5. حل مشكلات استيراد المكتبات

إذا تم تثبيت المكتبات ولكن لا تزال غير متاحة، تحقق من:

1. صيغة الاستيراد الصحيحة في الملفات:
   ```javascript
   // استيراد React
   import React from 'react';
   import { useState, useEffect } from 'react';
   
   // استيراد Supabase
   import { supabase } from '@/integrations/supabase/client';
   ```

2. وجود المكتبات في package.json:
   ```bash
   # للتحقق من تثبيت مكتبة
   npm list react
   npm list @supabase/supabase-js
   ```

### 6. إعادة تثبيت كامل للمكتبات

إذا استمرت المشكلة، جرب إعادة تثبيت جميع المكتبات:

```bash
npm cache clean --force
rm -rf node_modules
npm install
npm run dev
```

## تشخيص الموارد البطيئة والملفات الكبيرة

إذا كان التطبيق يعمل ببطء، استخدم تبويب "أداء التحميل" في صفحة التشخيص لتحديد:

1. الموارد البطيئة التي تستغرق وقتاً طويلاً للتحميل
2. الملفات الكبيرة التي قد تؤثر على الأداء

## مشاكل شائعة وحلولها

### مشكلة: Supabase غير متاح

الحل:
1. تحقق من معلومات الاتصال في ملف `src/integrations/supabase/client.ts`
2. تأكد من تثبيت مكتبة `@supabase/supabase-js`
3. تحقق من وجود اتصال بالإنترنت

### مشكلة: مكتبات React غير متاحة

الحل:
1. تثبيت مكتبات React: `npm install react react-dom`
2. تحقق من صيغة الاستيراد في الملفات
3. تأكد من عدم وجود أخطاء في وحدة التحكم (F12 -> Console)

### مشكلة: خطأ في تحميل Tailwind CSS

الحل:
1. تأكد من تثبيت Tailwind: `npm install tailwindcss`
2. تحقق من ملف `tailwind.config.ts`
3. تأكد من استيراد CSS في `src/index.css`

---

إذا استمرت المشكلة، يرجى تقديم معلومات الأخطاء المعروضة في سجل التشخيص للحصول على مساعدة إضافية. 